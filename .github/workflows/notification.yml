name: Notify Telegram on Website Update

on:
  push:
    branches:
      - main  # Substitua pelo nome do branch principal
    paths:
      - '**.html'
      - '**.css'
      - '**.js'
      - '**.md'
      - '**.yml'
      - '**.json'

jobs:
  notify_telegram:
    name: Notify Telegram
    runs-on: ubuntu-latest

    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      - name: Get Commit Information
        id: commit_info
        run: |
          commit_title=$(git log -1 --pretty=format:'%s')
          commit_description=$(git log -1 --pretty=format:'%b')
          echo "title=$commit_title" >> $GITHUB_OUTPUT
          echo "description=$commit_description" >> $GITHUB_OUTPUT

      - name: Send Notification to Telegram
        uses: appleboy/telegram-action@master
        with:
          to: -1002216267052  # Substitua pelo ID correto do canal ou grupo
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}  # Token do bot do Telegram
          format: markdown  # Corre√ß√£o aqui
          message: |
            üöÄ *Novo update no site!*

            *T√≠tulo do Commit:* `${{ steps.commit_info.outputs.title }}`
            *Descri√ß√£o do Commit:* `${{ steps.commit_info.outputs.description }}`
            üåê Acesse o site em [ToolTelegramWebsite](https://aglsk.github.io/ToolTelegramWebsite)

